---
SideBar_Pocation: 1
Tiêu đề: Mô tả xác thực 802.1x
# slug:/nội bộ/ccna/không dây/xác định-radius-server-beable-snmp-syslog
Tags:
- Cisco
- 802.1x
- Xác thực
- Bán kính
---

Nhập điểm nổi bật từ '@site/src/các thành phần/điểm nổi bật';
Nhập các tab từ '@chủ đề/tab';
Nhập tabitem từ '@ chủ đề / tabitem';
Nhập CodeBlock từ '@Theme/CodeBlock';

::: Thận trọng
Tôi chỉ đề cập đến những gì tôi quan sát được, vì vậy vui lòng tham khảo hướng dẫn đầy đủ để biết thêm thông tin.
Bạn có thể tìm thấy nó tại:
- [Thiết kế bảo mật] (https://www.cisco.com/c/en/us/td/docs/solutions/enterprise/education/schoolssra_dg/schoolssra-dg/schoolssra_chap4.html)
- Cisco U.
:::

## Giới thiệu

Nhu cầu truy cập mạng an toàn là quan trọng hơn bao giờ hết.Các chuyên gia tư vấn, nhà thầu và khách đều cần truy cập vào tài nguyên mạng, nhưng họ có thể không được phép truy cập tất cả các tài nguyên giống như nhân viên thông thường.802.1x là một tiêu chuẩn của IEEE cung cấp kiểm soát truy cập cấp phương tiện (Lớp 2), điều đó có nghĩa là nó có thể được sử dụng để kiểm soát ai được phép kết nối với mạng và tài nguyên nào họ được phép truy cập.

Xác thực 802.1x cung cấp các lợi ích sau:

- ** Tầm nhìn **: Liên kết tên người dùng với địa chỉ IP, địa chỉ MAC, công tắc và cổng.Khả năng hiển thị này rất hữu ích cho kiểm toán bảo mật, pháp y mạng, thống kê sử dụng mạng và khắc phục sự cố.
- ** Bảo mật **: Cung cấp phương thức mạnh nhất để xác thực, cho phép bạn kiểm soát truy cập mạng ở cạnh truy cập.
- ** Dịch vụ dựa trên danh tính **: Tận dụng danh tính được xác thực để cung cấp động các dịch vụ tùy chỉnh như gán quyền truy cập phù hợp cho người dùng được xác thực.
- ** Tính minh bạch **: Triển khai xác thực theo cách không can thiệp vào trải nghiệm người dùng cuối.
- ** Xác thực người dùng và thiết bị **: Xác thực cả người dùng và thiết bị.

Bài viết này giải thích các vai trò rằng cả giao thức xác thực mở rộng (EAP) và bán kính trong xác thực 802.1x.EAP mang thông tin xác thực tùy ý và hỗ trợ hai loại phương pháp xác thực: đường hầm EAP và không đường hầm EAP.RADIUS đóng vai trò là giao thức vận chuyển của các tin nhắn EAP giữa trình xác thực, chẳng hạn như công tắc và máy chủ xác thực.<Tô màu molor = "#ffb07f"> Thay đổi ủy quyền của RADIUS (COA) </tô sáng> cung cấp một cơ chế để thay đổi các thuộc tính của phiên AAA sau khi được xác thực, cho phép triển khai một số dịch vụ Cisco ISE quan trọng.

## 802.1x và EAP
EAP ban đầu được thiết kế để hoạt động như một khung xác thực cho PPP (được ghi lại trong RFC 1661), nhưng EAP đã được sử dụng rộng rãi để sử dụng trên mạng không dây có dây của IEEE 802.3 và 802.11.EAP ban đầu được chỉ định trong RFC 2284, đã bị lỗi thời bởi RFC 3748 và được cập nhật trong RFC 5247. EAP là một giao thức vận chuyển linh hoạt được sử dụng để mang thông tin xác thực tùy ý và không phải là phương thức xác thực (EAP hỗ trợ nhiều phương thức xác thực).EAP cũng độc lập với phương tiện truyền thông, nhưng thường chạy qua các lớp liên kết dữ liệu như PPP, IEEE 802.3 có dây hoặc phương tiện không dây 802.11.

Có bốn loại gói EAP được xác định trong RFC 3748 và được liệt kê bởi số được gán cho trường mã của gói EAP:

|Trường mã |Loại gói EAP |
|---------- |-------------- |
|1 |Yêu cầu |
|2 |Phản hồi |
|3 |Thành công |
|4 |Thất bại |

! [] (./ img/pack_basic_flow.webp)

Điều quan trọng là phải hiểu rằng chính EAP là một đặc điểm kỹ thuật cho việc vận chuyển các cơ chế xác thực và ủy quyền và không phải là một giao thức xác thực.

802.1x xác định sự đóng gói của EAP trên IEEE 802, được gọi là EAPOL.Khi một cổng chuyển đổi được cấu hình để yêu cầu xác thực 802.1x, nó được gọi là cổng được kiểm soát.

! [] (./ IMG/control_port.webp)

Một cổng được kiểm soát, theo mặc định, không cho phép bất kỳ đầu vào nào trên cổng đó ngoại trừ EAPOL.Người thay thế chỉ có thể truy cập các dịch vụ mạng ngoài cổng sau khi thay thế xác thực.

Hình tiếp theo cho thấy trao đổi xác thực và ủy quyền 802.1x chung chung.Các chi tiết cụ thể của tin nhắn khác nhau tùy theo phương pháp EAP được chọn bởi quản trị viên mạng.Vai trò của trình xác thực là thực thi các chính sách được cung cấp bởi máy chủ xác thực, để làm dịch giả giữa các tin nhắn EAPOL Lớp 2 từ người cung cấp và đóng gói EAP trong các tin nhắn bán kính Lớp 3 đến máy chủ xác thực, Cisco ISE trong ví dụ này.

! [] (./ img/802_1x_autho_authen_exchange.webp)

## Phương pháp EAP
Giao thức xác thực được sử dụng trong cơ chế xác thực và ủy quyền EAP được xác định bằng phương pháp EAP đã sử dụng.Có hai loại phương pháp EAP: đường hầm EAP và không đường hầm EAP.

Trong kiến ​​trúc EAP đơn giản, không đường hầm, một phiên EAP duy nhất tồn tại giữa máy chủ thay thế và máy chủ xác thực.Trong kiến ​​trúc này, người cung cấp sẽ gửi danh tính (tên) của nó trong rõ ràng đến máy chủ xác thực.Bước này được theo sau bởi một trao đổi xác thực máy chủ xác thực cho người dùng và người dùng đến máy chủ xác thực.Nếu người dùng được xác thực thành công, máy chủ xác thực sẽ tín hiệu thành công với trình xác thực thông qua giao thức RADIUS.Chế độ này rất đơn giản để hiểu nhưng có giới hạn truyền danh tính người dùng (nhưng không phải thông tin đăng nhập) trong rõ ràng.Hạn chế này có thể không được coi là một rủi ro cho nhiều tổ chức.Truyền trao đổi xác thực phản hồi thử thách trong Clear có thể tạo điều kiện thuận lợi cho một số cuộc tấn công từ điển thụ động nếu mật khẩu người dùng yếu.Ngoài ra, các kiến ​​trúc EAP này không thể dễ dàng hỗ trợ mật khẩu một lần vì các mật khẩu này không hỗ trợ các phương thức phản hồi thử thách thường được sử dụng bên trong trao đổi xác thực EAP.

! [] (./ IMG/EAP_METHOD_1.WEBP)

Để khắc phục những hạn chế này, bạn có thể sử dụng kiến ​​trúc EAP được đường hầm, trong đó một EAP bên ngoài gói gọn một EAP bên trong.EAP bên ngoài cung cấp xác thực máy chủ và đường hầm an toàn bằng mã hóa cho phương pháp EAP bên trong để chạy. Các EAP bên ngoài điển hình được bảo vệ giao thức xác thực mở rộng (PEAP) và giao thức xác thực mở rộng xác thực linh hoạt thông qua đường hầm an toàn (EAP-FAST).Giao thức xác thực mở rộng Microsoft Microsoft Challenge Protocol Phiên bản 2 (EAP-MSCHAPV2), Bảo mật lớp chuyển giao xử lý giao thức xác thực mở rộng (EEP-TLS) và thẻ mã thông báo xác thực mở rộng (EAP-GTC) được sử dụng cho Inter

! [] (./ img/eap_method_2.webp)

EAP có nhiều biến thể sử dụng các loại giao thức xác thực khác nhau và hỗ trợ các thông tin khác nhau.

Các phương pháp EAP không đường hầm phổ biến nhất là:

-** EAP-MD5 **: Loại tiêu hóa giao thức xác thực mở rộng 5 (EAP-MD5) sử dụng cơ chế phản hồi thử thách với băm.Nó chỉ hỗ trợ mật khẩu dưới dạng thông tin đăng nhập của khách hàng và không xác thực máy chủ, khiến nó dễ bị tấn công vào các cuộc tấn công giữa các trung gian.Nên tránh EAP-MD5, trừ khi nó được đặt bên trong một EAP khác xác thực máy chủ (ví dụ: PEAP).

-** EAP-MSCHAPV2 **: Loại EAP này giống như EAP-MD5 nhưng cung cấp xác thực hai chiều.Nó hỗ trợ mật khẩu cho cả thông tin đăng nhập của máy khách và máy chủ và cũng có thể làm việc với các băm mật khẩu Microsoft thay vì mật khẩu, làm cho nó phù hợp để tích hợp với Microsoft Active Directory.Do đó, EAP-MSCHAPV2 được khuyến nghị trong các kiến ​​trúc xác thực sử dụng mật khẩu đơn giản và có thể được triển khai trên các kênh không tin cậy.

-** EAP-TLS **: Loại EAP này là phương pháp phản hồi thử thách sử dụng mật mã khóa công khai.Nó hỗ trợ các cặp khóa công khai và riêng tư (chứng chỉ kỹ thuật số) làm thông tin đăng nhập máy khách và máy chủ.EAP-TLS yêu cầu một cơ sở hạ tầng khóa công khai (PKI) để phân phối chứng chỉ.EAP-TLS hoạt động với Microsoft Active Directory hoặc cơ sở dữ liệu Giao thức truy cập thư mục nhẹ chung (LDAP) để ủy quyền cho người dùng dựa trên nhận dạng chứng chỉ kỹ thuật số.

- ** EAP-GTC **: là một loại EAP đơn giản.Nó gửi mật khẩu Cleartext hoặc mật khẩu một lần đến máy chủ xác thực.EAP-GTC là giao thức duy nhất hỗ trợ mật khẩu một lần (OTP) làm thông tin đăng nhập của khách hàng nhưng phải luôn được đặt bên trong PEAP hoặc EAP-FAST, cung cấp kênh truyền thông an toàn.EAP-GTC hoạt động với cơ sở dữ liệu người dùng LDAP Microsoft hoặc chung LDAP, cũng như với các máy chủ mã thông báo.

Các phương pháp EAP đường hầm phổ biến nhất là:

- ** EAP-FAST **: Loại EAP này là một giao thức đường hầm có thể đường hầm các giống EAP bên trong yêu cầu một kênh an toàn.EAP-Fast có thể sử dụng mật khẩu hoặc chứng chỉ để xác thực máy chủ.Nó có thể yêu cầu cung cấp ban đầu an toàn cho thông tin đăng nhập máy chủ (được gọi là thông tin truy cập được bảo vệ [PAC]) trên máy khách.Thông thường bạn sẽ sử dụng EAP-FAST đến đường hầm EAP-MSCHAPV2 hoặc EAP-TLS bên trong nó, để bảo vệ danh tính hoặc cho đường hầm EAP-GTC bên trong nó.Ưu điểm của EAP-Fast khi so sánh với PEAP là nó hỗ trợ chuỗi EAP, cho phép xác thực người dùng và thiết bị (máy) bên trong cùng một phiên EAP.Khái niệm xác thực người dùng và/hoặc máy chỉ được sử dụng cho các điểm cuối của Microsoft Windows là thành viên của Miền Microsoft Active Directory.

- ** PEAP **: Một giao thức đường hầm EAP có thể đường hầm các giống EAP bên trong yêu cầu một kênh an toàn.PEAP xác thực các máy chủ xác thực bằng cách sử dụng các cặp khóa công khai và riêng tư.Nó yêu cầu quản trị viên cung cấp chứng chỉ Máy chủ xác thực hoặc Chứng chỉ Chứng chỉ gốc (CA) trên khách hàng.Thông thường, bạn sẽ sử dụng PEAP cho đường hầm EAP-MSCHAPV2 hoặc EAP-TLS bên trong nó, để cung cấp bảo vệ danh tính hoặc cho đường hầm EAP-GTC bên trong nó.

<chi tiết>
<Tóm tắt> Bảng sau đây mô tả phương thức, loại bảo mật được sử dụng và các yêu cầu cho các chứng chỉ kỹ thuật số phía máy chủ hoặc máy khách.: </Tóm tắt>
<Tabs>
<TabItem value = "không phải đường hầm-eap" nhãn = "không phải đường hầm eap">>

| Phương pháp | Giao thức xác thực | Thông tin được hỗ trợ | Khi nào nên sử dụng |
| ------ | ----------------------- | -------------------------- | ----------- |
|EAP-MD5 |Phản hồi thử thách với băm |Mật khẩu để xác thực khách hàng |Tránh vì nó dễ bị tấn công giữa các cuộc tấn công trung gian.|
|EAP-MSCHAPV2 |Phản hồi thử thách với băm |Mật khẩu để xác thực khách hàng |Để hỗ trợ xác thực mật khẩu khách hàng, khi tích hợp với cơ sở dữ liệu Windows (AD) hiện có.|
|EAP-TLS |Phản hồi thách thức với mật mã khóa công khai |Chứng chỉ kỹ thuật số cho xác thực máy khách và máy chủ |Để hỗ trợ chứng chỉ kỹ thuật số như thông tin đăng nhập máy chủ và máy khách.|
|EAP-GTC |Chuyển giao Mật khẩu ClearText |Mật khẩu hoặc OTP để xác thực khách hàng |Để hỗ trợ OTP làm thông tin đăng nhập của khách hàng, chỉ nên được sử dụng bên trong PEAP hoặc EAP-FAST.|

</ Tabitem>
Không

| Phương pháp | Giao thức xác thực | Thông tin được hỗ trợ | Khi nào nên sử dụng |
| ------ | ----------------------- | -------------------------- | ----------- |
|Peap |Phản hồi thách thức với mật mã khóa công khai |Chứng chỉ kỹ thuật số để xác thực máy chủ Các thông tin khác trong các phương thức EAP được đường hầm |Để hỗ trợ chứng chỉ kỹ thuật số dưới dạng thông tin đăng nhập máy chủ và để cung cấp kênh an toàn TLS cho các phương thức EAP bên trong.|
|EAP-FAST |Phản ứng thách thức với mật mã đối xứng (PAC) |Chứng chỉ kỹ thuật số để xác thực máy chủ, PAC để xác thực lẫn nhau các thông tin xác thực khác trong các phương thức EAP được đường hầm |Để hỗ trợ chứng chỉ kỹ thuật số dưới dạng thông tin đăng nhập máy chủ và để cung cấp kênh an toàn TLS cho các phương thức EAP bên trong.Để hỗ trợ chuỗi EAP.|

</ Tabitem>
</Tab>
</Chi tiết>

Khi triển khai truy cập mạng an toàn của Cisco, bạn sẽ phải thu thập các tham số cần thiết, chẳng hạn như mức độ bảo mật, chức năng và loại thông tin đăng nhập mong muốn để xác thực người dùng và thiết bị và chọn các phương thức EAP phù hợp.

EAP-TLS và EAP-MSCHAPV2, đường hầm bên trong PEAP hoặc EAP-FAST là các phương pháp EAP được sử dụng rộng rãi nhất để triển khai truy cập mạng an toàn.Tuy nhiên, chức năng EAP khác nhau dựa trên phương pháp EAP được chọn và điều quan trọng là phải xem xét các khả năng của từng phương pháp EAP khi chọn triển khai mới.Ví dụ: nếu có yêu cầu sử dụng chứng chỉ kỹ thuật số để xác thực khách hàng, EAP-TLS là phương pháp không phải là phương thức không đường hầm duy nhất đáp ứng yêu cầu.Tương tự, nếu có yêu cầu về chuỗi EAP, Cisco EAP-Fast là phương pháp EAP đường hầm duy nhất đáp ứng yêu cầu.

## Vai trò của bán kính trong giao tiếp 802.1x

RADIUS bắt đầu như một giải pháp để xác thực và ủy quyền cho các dịch vụ người dùng quay số.Ban đầu được phát triển vào năm 1991 bởi Livingston để cung cấp các dịch vụ xác thực, ủy quyền và kế toán (AAA) cho dòng máy chủ truy cập từ xa (RASS), RADIUS đã được mở rộng và mở rộng để phục vụ nhu cầu AAA của nhiều thiết bị và yêu cầu.

! [] (./ IMG/ROME_RADIUS_1.WEBP)

Có một số RFC mà người triển khai triển khai truy cập mạng an toàn của Cisco sẽ thấy hữu ích:

- ** RFC 2865 **: Bán kính

- ** RFC 3579 **: Hỗ trợ bán kính cho EAP

- ** RFC 3580 **: Hướng dẫn sử dụng bán kính IEEE 802.1x

RADIUS xác định bốn loại gói được sử dụng để xác thực và ủy quyền thông tin liên lạc của người dùng.Trong bối cảnh 802.1x, bốn loại gói này được sử dụng để mang tin nhắn EAP.

! [] (./ IMG/ROME_RADIUS_2.WEBP)

|Các loại gói bán kính |Mô tả |
| --------------------- | ------------- |
|Yêu cầu truy cập |Mỗi phiên bán kính phải bắt đầu bằng một yêu cầu truy cập.Yêu cầu thường bao gồm tên người dùng nhưng phải bao gồm thông tin về Máy chủ truy cập mạng (NAS) và một số dạng mật khẩu.Loại gói này luôn được gửi đến máy chủ RADIUS. |
|Truy cập-Chấp nhận |Loại gói này được sử dụng để truyền tải thông tin cấu hình đến NAS đến Dịch vụ cung cấp cho người dùng.Trong bối cảnh 802.1x, điều này có thể bao gồm một bài tập DACL hoặc Vlan.Loại gói này luôn được gửi từ máy chủ RADIUS. |
|Từ chối truy cập |Nếu bất kỳ thuộc tính nào nhận được bởi máy chủ RADIUS không được chấp nhận, gói từ chối truy cập phải được gửi đến NAS.Loại gói này luôn được gửi từ máy chủ RADIUS.|
|Truy thể truy cập |Khi nhận được yêu cầu truy cập, máy chủ RADIUS có thể đưa ra thách thức cho người dùng.Trong trao đổi EAP-MD5, máy chủ RADIUS sẽ sử dụng loại gói này để gửi chuỗi thử thách cho người dùng.Phản hồi thích hợp cho gói thử thách truy cập là một gói yêu cầu truy cập với câu trả lời cho thử thách.Loại gói này luôn được gửi từ máy chủ RADIUS.|

Trong bối cảnh 802.1x, RADIUS được sử dụng làm cơ chế vận chuyển cho các thông điệp EAP, có nguồn gốc từ người thay thế 802.1x và được gửi đến máy chủ xác thực.Lưu ý rằng các thông báo EAP được vận chuyển bên trong bán kính chỉ giữa một máy chủ xác thực và máy chủ xác thực.

Như được minh họa trong hình, các thông điệp EAP từ người thay thế cho trình xác thực được trao đổi dưới dạng các gói EAPOL lớp 2.Bởi vì máy chủ xác thực nói giao thức RADIUS và có khả năng là lớp 3 liền kề với trình xác thực, trình xác thực gói gọn các tin nhắn EAP trong RADIUS.Bộ xác thực hoạt động như một điểm chuyển tiếp dịch cho EAP và bán kính.

! [] (./ IMG/ROME_RADIUS_3.WEBP)

Việc đóng gói EAP trong bán kính được xác định trong RFC 3579. Bất kỳ phương thức EAP nào được khách hàng sử dụng cũng phải được cấu hình trong máy chủ xác thực RADIUS.Đối với các phương pháp như EAP-TLS hoặc PEAP, máy chủ xác thực yêu cầu chứng chỉ kỹ thuật số X.509 phiên bản 3 (X.509V3).

Việc xác thực có thể được bắt đầu bởi người cung cấp hoặc trình xác thực.Trình xác thực bắt đầu xác thực khi trạng thái liên kết thay đổi từ trở xuống, hoặc định kỳ miễn là cổng vẫn lên và không được xác thực.

Trình xác thực gửi một yêu cầu EAP hoặc khung nhận dạng cho khách hàng để yêu cầu danh tính của nó.Khi nhận được khung, người cung cấp phản hồi với phản hồi EAP hoặc khung nhận dạng.Tuy nhiên, nếu trong quá trình khởi động, người cung cấp không nhận được yêu cầu EAP hoặc khung nhận dạng từ trình xác thực, người thay thế có thể bắt đầu xác thực bằng cách gửi khung bắt đầu EAPOL, điều này nhắc nhở trình xác thực yêu cầu danh tính của khách hàng.

Khi người cung cấp cung cấp danh tính của nó, trình xác thực bắt đầu vai trò của nó là trung gian và vượt qua các khung EAP giữa người thay thế và máy chủ xác thực cho đến khi xác thực thành công hoặc không thành công.Nếu xác thực thành công, cổng xác thực được ủy quyền.

Việc trao đổi cụ thể của các khung EAP phụ thuộc vào phương pháp xác thực được sử dụng.

### Các cặp có giá trị-RADIUS-VALUE trong 802.1x

Mặc dù cả EAP và RADIUS đều sử dụng các thuộc tính để truyền thông tin, các thuộc tính EAP đều khá hạn chế về số lượng và minh bạch cho quản trị viên và người dùng cuối.Để biết bảo hiểm chi tiết của các thuộc tính EAP, hãy tham khảo RFC 3579, Phần 3.3, Bảng thuộc tính.

Các cặp giá trị thuộc tính RADIUS được quan tâm nhiều hơn vì máy chủ RADIUS có thể được cấu hình để phân tích các cặp giá trị thuộc tính nhận được và đưa ra quyết định chính sách.Kết quả của một quyết định chính sách có thể là gửi các thuộc tính đến trình xác thực và ảnh hưởng đến khả năng giao tiếp của người thay thế.

Thuộc tính IETF RADIUS là bộ gốc gồm 255 thuộc tính tiêu chuẩn được sử dụng để truyền đạt thông tin AAA giữa máy khách và máy chủ.Các thuộc tính IETF là tiêu chuẩn và dữ liệu thuộc tính được xác định trước.Tất cả các máy khách và máy chủ trao đổi thông tin AAA bằng các thuộc tính IETF phải đồng ý về dữ liệu thuộc tính như nghĩa chính xác của các thuộc tính và giới hạn chung của các giá trị cho mỗi thuộc tính.

Các thuộc tính bán kính được chỉ định trong một loại, chiều dài, giá trị (TLV), trong đó các trường loại và độ dài được cố định ở mức 8 bit mỗi trường và trường giá trị có kích thước thay đổi, tùy thuộc vào thuộc tính.

! [] (./ IMG/ROME_RADIUS_4.WEBP)

|Không. |Thuộc tính bán kính |Chức năng |
| --- | --- | --- |
|1 |Tên người dùng |Tên của người dùng để xác thực |
|2 |Người dùng-password |Mật khẩu người dùng |
|4 |NAS-IP-ADDRESS |Địa chỉ IP của NAS đang yêu cầu xác thực người dùng |
|5 |NAS-PORT |Cổng vật lý trên NAS (ví dụ: GI1/0/11) |
|8 |Đóng khung-IP-Áp địa |Chỉ định IP do người dùng hoặc bán kính cung cấp |
|26 |Nhà cung cấp cụ thể |Bất kỳ thuộc tính nào được xác định bởi một nhà cung cấp |
|30 |Đang gọi là Trạm-ID |Đối với IEEE 802.1x, thuộc tính này được sử dụng để lưu trữ địa chỉ MAC xác thực |
|31 |Trạm gọi-ID |Đối với IEEE 802.1x, thuộc tính này được sử dụng để lưu trữ địa chỉ MAC thay thế |
|32 |Định danh NAS |Xác định NAS đang yêu cầu xác thực người dùng |
|44 |ACCT-Session-ID |Xác định duy nhất một phiên của người dùng |
|64 |Loại đường hầm |Chỉ định loại đóng gói |
|65 |Loại đường hầm-Loại |Chỉ định loại trung bình vật lý |
|81 |Tunnel-Private-Group-ID |Chỉ định ID nhóm cho phiên |

Có một số thuộc tính của Lực lượng đặc nhiệm kỹ thuật internet (IETF) mà bạn nên quen thuộc.Trong số các thuộc tính phổ biến trong bảng, một số cần giải thích bổ sung.

Thuộc tính 32 chứa một chuỗi xác định NAS có nguồn gốc yêu cầu truy cập.Thuộc tính này chỉ được sử dụng trong các gói yêu cầu truy cập.NAS-IP-address (thuộc tính 4) hoặc NAS-Identifier (thuộc tính 32) phải có trong gói yêu cầu truy cập.

Các thuộc tính dành riêng cho nhà cung cấp bán kính (VSA) có nguồn gốc từ thuộc tính IETF dành riêng cho nhà cung cấp (thuộc tính 26).Thuộc tính 26 cho phép chức năng RADIUS được mở rộng bởi các nhà cung cấp mà không cần viết lại giao thức mỗi khi nhà cung cấp có ý tưởng tốt để tăng cường cung cấp bán kính của họ.VSA được sử dụng rộng rãi bởi các nhà cung cấp như Cisco, Microsoft và Juniper.Một VSA được IETF xác định là một tuple trong thuộc tính định dạng 26/thuộc tính ID/nhà cung cấp của nhà cung cấp.

Thuộc tính 26 cho phép một nhà cung cấp tạo thêm 255 thuộc tính;Đó là, một nhà cung cấp có thể tạo một thuộc tính không khớp với dữ liệu của bất kỳ thuộc tính IETF nào và đóng gói nó đằng sau thuộc tính 26. Thuộc tính mới được tạo được chấp nhận nếu người dùng chấp nhận thuộc tính 26.

Ví dụ, Cisco VSA Cisco-AV-cặp có số nhận dạng là 026/009/001.Trong bộ xử lý đó, 26 là số thuộc tính IETF cho VSA, 009 là ID nhà cung cấp được IETF gán cho Cisco và 001 là ID mà Cisco được gán cho thuộc tính tùy chỉnh của nó.Thuộc tính Cisco-AV-cặp thường được sử dụng khi RADIUS được sử dụng để xác thực và ủy quyền cho người dùng yêu cầu truy cập mạng hoặc thiết bị.Ví dụ: Cisco ISE sử dụng "Cisco-AV-cặp = url-redirect = https: // ise_fqdn: 8443/guestportal/gateway? SessionId = sesionidValue & portal = ..."

Các thuộc tính RADIUS IETF 64, 65 và 81 thường được sử dụng cùng nhau trong các triển khai Cisco 802.1x như một cách để thực hiện gán Vlan khi một chất thay thế xác thực.Các thuộc tính 64 và 65 chỉ định cho trình xác thực rằng một Vlan trên mạng IEEE 802 sẽ được dự kiến.Thuộc tính 81 bao gồm tên hoặc số của Vlan trong trường giá trị của nó.

Trong ví dụ tiếp theo, kiểm tra người dùng xác thực thành công đối với máy chủ RADIUS.Authenticator (Switch) cũng gửi các thuộc tính bán kính khác nhau trong thông báo yêu cầu RADIUS Access.

Máy chủ thực hiện tra cứu thành viên nhóm và xác định rằng người dùng thử nghiệm là thành viên của nhóm dự án.Sau khi máy chủ RADIUS khớp với nhóm, nó thực hiện chính sách chuyển người dùng đó sang Vlan truy cập thích hợp.Trong trường hợp này, người dùng được gán cho dự án Vlan.Máy chủ RADIUS đóng vai trò là điểm quyết định chính sách (PDP) và gửi các thuộc tính thích hợp đến trình xác thực dưới dạng các thuộc tính RADIUS 64, 65 và 81. Chính sách xác thực thực thi chính sách.

! [] (./ IMG/ROME_RADIUS_5.webp)

## Thay đổi RADIUS của xác thực

Tính năng RADIUS COA cung cấp một cơ chế để thay đổi các thuộc tính của phiên AAA sau khi nó được xác thực.Khi chính sách thay đổi cho người dùng hoặc nhóm người dùng trên máy chủ AAA, chẳng hạn như Cisco ISE, máy chủ có thể gửi yêu cầu RADIUS COA không mong muốn để tái xác thực hóa xác thực và áp dụng chính sách mới.

! [] (./ IMG/RADIUS_COA_1.WEBP)

Giao thức bán kính tiêu chuẩn thường được sử dụng trong mô hình kéo, trong đó yêu cầu bắt nguồn từ thiết bị truy cập mạng (NAD) và phản hồi được gửi từ các máy chủ AAA được truy vấn.Phần mềm Cisco iOS và iOS XE và Cisco WLC hỗ trợ yêu cầu RADIUS CoA được xác định trong RFC 5176 được sử dụng trong mô hình được đẩy, trong đó yêu cầu bắt nguồn từ máy chủ AAA và được gửi đến NAD và cho phép cấu hình lại các phiên từ AAA hoặc các máy chủ chính sách.

Có hai tin nhắn Bán kính Bán kính khác nhau có thể được gửi từ máy chủ AAA:

- ** Ngắt kết nối-Yêu cầu **: Được sử dụng để chấm dứt (các) phiên của người dùng trên thiết bị truy cập mạng (NAD) và loại bỏ tất cả bối cảnh phiên được liên kết.

- ** COA-RQUEST **: Được sử dụng để thay đổi tự động ủy quyền phiên và có thể bao gồm các hành động, chẳng hạn như: reacyenticate, port bounce và vô hiệu hóa cổng.

Có bốn tin nhắn Bán kính Bán kính khác nhau được gửi từ NAD đến máy chủ AAA dưới dạng phản hồi:

- ** Ngắt kết nối-ack **: Được sử dụng để xác nhận ngắt kết nối phiên của người dùng.

- ** Ngắt kết nối-nak **: Được sử dụng để thông báo cho máy chủ AAA NAD không thể ngắt kết nối (các) phiên của người dùng.

- ** COA-ack **: Được sử dụng để xác nhận (các) phiên của người dùng.

- ** COA-NAK **: Được sử dụng để thông báo cho AAA Server CoA không thành công.

Cả hai gói yêu cầu ngắt kết nối và yêu cầu COA cần bao gồm các thuộc tính bán kính nhất định để xác định duy nhất NAD cũng như (các) phiên người dùng trên NAD.

Các thuộc tính nhận dạng NAS là như sau:

-** NAS-IP-ADDRESS **: Địa chỉ IPv4 của NAD.

- ** Nas-Identifier **: Chuỗi xác định NAD.

Một số thuộc tính nhận dạng phiên:

- ** Tên người dùng **: Tên của người dùng được liên kết với một hoặc nhiều phiên.

- ** Nas-Port **: Cổng mà một phiên bị chấm dứt.

-** Được gọi là Station-ID **: Địa chỉ liên kết mà một phiên được kết nối.

-** Calling-Station-id **: Địa chỉ liên kết mà một hoặc nhiều phiên được kết nối.

-** Acct-session-id **: Người nhận dạng xác định duy nhất một phiên trên NAD.

Máy chủ Cisco ISE phụ thuộc rất nhiều vào RADIUS COA.Nếu không có sự hỗ trợ cho COA trên thiết bị ISE và Cisco iOS và iOS XE và Cisco WLCS, các dịch vụ sau đây sẽ không khả dụng:

- ** Xác thực web trung tâm **: COA được sử dụng để thay đổi phiên ủy quyền của người dùng sau khi người dùng xác thực thông qua cổng khách bị giam cầm.

- ** Tư thế khách hàng **: COA được sử dụng để thay đổi phiên ủy quyền của người dùng sau khi Cisco ISE xác định trạng thái tư thế của máy khách.

- ** Hồ sơ khách hàng **: COA được sử dụng để thay đổi phiên ủy quyền của thiết bị sau khi Cisco ISE xác định hồ sơ và phân loại thiết bị.

- ** Ngăn chặn mối đe dọa nhanh chóng **: COA được sử dụng để thay đổi phiên ủy quyền của người dùng nếu một thiết bị khác của Cisco, chẳng hạn như Tường lửa thế hệ tiếp theo của Cisco Sterealth hoặc Cisco Firepower, phát hiện một sự kiện độc hại liên quan đến người dùng.

- ** Kiểm soát các phiên bán kính hoạt động của Quản trị viên **: Được quản trị viên sử dụng để kích hoạt tự xác thực theo cách thủ công cho các mục đích khắc phục sự cố, chặn máy chủ có vấn đề hoặc đẩy chính sách ủy quyền cập nhật lên máy chủ sau khi cập nhật cấu hình chính sách ủy quyền.

Hình dưới đây hiển thị một dòng chảy của Bán kính CoA cho mục đích tư thế của khách hàng với Cisco ISE.Lưu ý rằng con số được đơn giản hóa và không bao gồm tất cả các bước xảy ra trong thực tế.

! [] (./ IMG/RADIUS_COA_2.WEBP)

Dòng chảy như sau:

1. Một điểm cuối kết nối và bắt đầu quá trình xác thực EAP.Authenticator gói gọn EAP Exchange bên trong các gói RADIUS và gửi nó đến máy chủ xác thực Cisco ISE.

2. Mặc dù Cisco ISE nhận thức được danh tính người dùng, nhưng nó vẫn chưa thực hiện đánh giá tư thế.Do đó, nó chọn một chính sách tạm thời cho phiên này và gửi thông báo chấp nhận truy cập bán kính đến NAD.Vì điểm cuối không nên có quyền truy cập đầy đủ, thông báo Access-Accept chứa Danh sách kiểm soát truy cập có thể tải xuống (DACL) dưới dạng thuộc tính Cisco AV, được áp dụng trên trình xác thực cho phiên điểm cuối.Ví dụ, DACL như vậy cho phép kết nối IP với Cisco ISE cho phép đánh giá tư thế hoàn thành và kết nối IP với máy chủ khắc phục trong trường hợp đánh giá tư thế không thành công.

3. Đánh giá tư thế hoàn thành, và điểm cuối được tìm thấy là tuân thủ.Cisco ISE liên kết chính sách truy cập đầy đủ với phiên.

4. Cisco ISE phát hành một thông điệp COA cho công tắc, yêu cầu xác nhận lại một phiên AAA nhất định.

5. Chuyển đổi thừa nhận COA bằng cách gửi gói COA-ack.

6. Switch Resend RADIUS Access-orquest với ID phiên hiện có và dữ liệu xác thực.

7. Cisco ISE trả lời bằng tin nhắn Access-Acept.Lần này, tin nhắn không chứa bất kỳ DACL nào vì điểm cuối là tuân thủ và có thể có quyền truy cập đầy đủ vào mạng.